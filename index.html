<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>ë¶€ì²œFC1995 ê³µì‹ê²½ê¸° ì•„ì¹´ì´ë¸Œ</title>
    <style>
        :root { --bfc-red: #ed1c24; --bfc-black: #1a1a1a; --bg-gray: #f4f4f4; }
        body { font-family: 'Pretendard', sans-serif; margin: 0; background-color: var(--bg-gray); color: #333; }
        header { background: linear-gradient(135deg, var(--bfc-black) 60%, var(--bfc-red)); color: white; padding: 40px 20px; text-align: center; border-bottom: 6px solid var(--bfc-red); }
        .mode-switch { display: flex; justify-content: center; gap: 10px; margin-top: -25px; position: relative; z-index: 100; }
        .mode-btn { background: white; border: 2px solid var(--bfc-red); color: var(--bfc-red); padding: 12px 30px; border-radius: 50px; font-weight: 800; cursor: pointer; transition: 0.3s; box-shadow: 0 4px 10px rgba(0,0,0,0.1); }
        .mode-btn.active { background: var(--bfc-red); color: white; }
        .container { max-width: 1250px; margin: 40px auto; padding: 0 15px; }
        .results-box { background: white; border-radius: 15px; overflow-x: auto; box-shadow: 0 4px 15px rgba(0,0,0,0.05); }
        table { width: 100%; border-collapse: collapse; min-width: 1100px; }
        th { background: #f8f9fa; padding: 15px; font-size: 0.8rem; color: #555; text-align: center; border-bottom: 2px solid #eee; }
        td { padding: 12px; text-align: center; border-bottom: 1px solid #f0f0f0; font-size: 0.85rem; }
        .win { color: var(--bfc-red); font-weight: bold; }
        .loading { text-align: center; padding: 100px; font-weight: bold; color: var(--bfc-red); }
    </style>
</head>
<body>

<header>
    <h1>ë¶€ì²œFC1995 ê³µì‹ê²½ê¸° ì•„ì¹´ì´ë¸Œ</h1>
    <div id="stat-bar" style="margin-top:10px; font-size:0.9rem; opacity:0.8;">ë°ì´í„° ë¡œë”© ì¤‘...</div>
</header>

<div class="mode-switch">
    <button id="btn-team" class="mode-btn active" onclick="switchMode('team')">ğŸŸï¸ íŒ€ ê²½ê¸° ê¸°ë¡</button>
    <button id="btn-player" class="mode-btn" onclick="switchMode('player')">ğŸƒâ€â™‚ï¸ ì„ ìˆ˜ ê°œì¸ ê¸°ë¡</button>
</div>

<div class="container">
    <div id="loader" class="loading">ğŸ”´ ë°ì´í„°ë¥¼ ì‹¤ì‹œê°„ìœ¼ë¡œ ë™ê¸°í™” ì¤‘ì…ë‹ˆë‹¤...</div>
    <div id="main-content" style="display:none;">
        <div class="results-box">
            <table>
                <thead id="t-head"></thead>
                <tbody id="t-body"></tbody>
            </table>
        </div>
    </div>
</div>

<script>
    // ì„±í˜„ë‹˜ì˜ êµ¬ê¸€ ì‹œíŠ¸ ì£¼ì†Œ (v7.4 ë°©ì‹ ìœ ì§€)
    const TEAM_URL = "https://docs.google.com/spreadsheets/d/e/2PACX-1vQTLnO6CTQkcgJTDHr0MNJAA5xUCCWSqWSq-fgvJkEIGRrOBH1D9EXNXJLxIAriWiQ1oMrSKxTq6Y8m/pub?gid=0&single=true&output=csv";
    const PLAYER_URL = "https://docs.google.com/spreadsheets/d/e/2PACX-1vQTLnO6CTQkcgJTDHr0MNJAA5xUCCWSqWSq-fgvJkEIGRrOBH1D9EXNXJLxIAriWiQ1oMrSKxTq6Y8m/pub?gid=1150204300&single=true&output=csv";

    let tData = [], pData = [], currentMode = 'team';

    async function init() {
        try {
            const [tRes, pRes] = await Promise.all([
                fetch(TEAM_URL + "&cb=" + Date.now()),
                fetch(PLAYER_URL + "&cb=" + Date.now())
            ]);
            tData = await parseCSV(await tRes.text());
            pData = await parseCSV(await pRes.text());
            
            document.getElementById('loader').style.display = 'none';
            document.getElementById('main-content').style.display = 'block';
            render();
        } catch (e) {
            document.getElementById('loader').innerHTML = "âŒ ì—°ê²° ì‹¤íŒ¨. ì‹œíŠ¸ ì„¤ì •ì„ í™•ì¸í•´ì£¼ì„¸ìš”.";
        }
    }

    function parseCSV(text) {
        const rows = text.split(/\r?\n/).filter(line => line.trim());
        if (rows.length < 1) return [];
        const heads = rows[0].split(',').map(h => h.replace(/[^\w]/gi, '').toLowerCase().trim());
        return rows.slice(1).map(row => {
            const vals = row.match(/(".*?"|[^",\s]+)(?=\s*,|\s*$)/g) || row.split(',');
            let o = {};
            heads.forEach((h, i) => { if(h) o[h] = (vals[i] || "").replace(/"/g, "").trim(); });
            return o;
        });
    }

    function switchMode(m) {
        currentMode = m;
        document.getElementById('btn-team').classList.toggle('active', m === 'team');
        document.getElementById('btn-player').classList.toggle('active', m === 'player');
        render();
    }

    function render() {
        const thead = document.getElementById('t-head');
        const tbody = document.getElementById('t-body');
        const statBar = document.getElementById('stat-bar');

        if (currentMode === 'team') {
            thead.innerHTML = '<tr><th>ë‚ ì§œ</th><th>ëŒ€íšŒ</th><th>ìƒëŒ€</th><th>ì¥ì†Œ</th><th>ìŠ¤ì½”ì–´</th><th>ê²°ê³¼</th><th>ê´€ì¤‘</th><th>ê°ë…</th></tr>';
            tbody.innerHTML = tData.map(m => {
                const isH = m.hometeam && m.hometeam.includes("ë¶€ì²œ");
                const hS = parseInt(m.homescored) || 0;
                const aS = parseInt(m.awayscored) || 0;
                const res = (isH ? hS > aS : aS > hS) ? "ìŠ¹" : (hS === aS ? "ë¬´" : "íŒ¨");
                return `<tr><td>${m.date}</td><td>${m.league}</td><td>${isH ? m.awayteam : m.hometeam}</td><td>${m.stadium}</td><td>${hS}:${aS}</td><td class="${res==='ìŠ¹'?'win':''}">${res}</td><td>${Number(m.attendance||0).toLocaleString()}</td><td>${m.bfcmanager || m.bfc_manager || '-'}</td></tr>`;
            }).join('');
            statBar.innerText = `ë¶€ì²œFC1995 íŒ€ ê¸°ë¡ ì¡°íšŒ ì¤‘`;
        } else {
            // [ìµœì¢…] ì„±í˜„ë‹˜ì˜ ë©”ëª¨ì¥ êµ¬ì¡°(pk, conceded, cleansheet) ë°˜ì˜
            thead.innerHTML = '<tr><th>ì´ë¦„</th><th>ì‹œì¦Œ</th><th>ëŒ€íšŒ</th><th>ê²½ê¸°</th><th>ë“ì </th><th>ë„ì›€</th><th>PK</th><th>ê²½ê³ </th><th>í‡´ì¥</th><th>ì‹¤ì </th><th>CS</th></tr>';
            tbody.innerHTML = pData.map(p => `
                <tr>
                    <td><b>${p.name || '-'}</b></td><td>${p.season || '-'}</td><td>${p.league || '-'}</td>
                    <td>${p.match || '0'}</td><td>${p.goal || '0'}</td><td>${p.assist || '0'}</td>
                    <td>${p.pk || '0'}</td><td>${p.yc || '0'}</td><td>${p.rc || '0'}</td>
                    <td>${p.conceded || '0'}</td><td>${p.cleansheet || '0'}</td>
                </tr>`).join('');
            statBar.innerText = `ì´ ${pData.length}ëª…ì˜ ì„ ìˆ˜ ê¸°ë¡ì´ ì¡°íšŒë˜ì—ˆìŠµë‹ˆë‹¤.`;
        }
    }
    window.onload = init;
</script>
</body>
</html>